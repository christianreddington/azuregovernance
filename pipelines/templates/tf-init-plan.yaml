parameters:
  tfCliInit: ""

steps:
  - bash: |
      terraform init
    displayName: "Terraform Init"
    name: init
    workingDirectory: src/terraform
    enabled: "true"
    env:
      ARM_CLIENT_SECRET: $(tfClientSecret)
      TF_CLI_ARGS_init: ${{parameters.tfCliInit}}"

  - bash: |
      terraform plan
    displayName: "Terraform Plan"
    name: plan
    workingDirectory: src/terraform
    enabled: "true"
    env:
      ARM_CLIENT_SECRET: $(tfClientSecret)
      TF_CLI_ARGS_init: ${{parameters.tfCliInit}}"
