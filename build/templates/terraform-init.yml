parameters:
  client_secret: ""
  client_id: ""
  tenant_id: ""
  subscription_id: ""
  storage_account_name: ""
  container_name: ""
  key: ""
  deploymentStage: ""

steps:
  - task: TerraformInstaller@0
    inputs:
<<<<<<< HEAD
      terraformVersion: "0.12.14"
=======
      terraformVersion: "0.12.19"
>>>>>>> 4d33a168900f4295ad706215d9e835170f0e667a

  - bash: |
      terraform version
    displayName: "Terraform Version"
    name: terraform version

    workingDirectory: $(Pipeline.Workspace)/terraformAzureGovernance
    enabled: false

  - bash: |
      terraform init \
      -input=false \
      -backend=true \
      -backend-config="client_secret=${{parameters.client_secret}}" \
      -backend-config="storage_account_name=${{parameters.storage_account_name}}" \
      -backend-config="container_name=${{parameters.container_name}}" \
      -backend-config="key=${{parameters.key}}"
    displayName: "Terraform Init"
    name: init
    workingDirectory: $(Pipeline.Workspace)/terraformAzureGovernance
    enabled: "true"
